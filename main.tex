%%%%%%%%%%%%%%
% Modelo de Trabalho Acadêmico-Científico do IFFar
% Autor: Leonardo Garcez Dalenogari Alba
% Ano: 2023
% Repositório: https://github.com/leonartex/iffar-modelo-latex
% Acesso pelo Overleaf: XXXXXXXXXXXXXXXXXXXXX

% IMPORTANTE: 
%   O modelo utiliza o compilador XeLaTeX (talvez possam ser utilizados outros, mas não é garantido o correto funcionamento, visto que seria necessário testar, porém, eu sei que alguns vão apresentar problemas na hora de compilar, como o pdflatex) e a edição do LaTeX de 2022
%   Se você estiver utilizando o Overleaf, com o documento aberto, clique em Menu, no canto superior esquerdo, e selecione o XeLaTeX como compilador caso ele  não esteja selecionado
%   Se estiver no PC, tenha certeza de estar na versão mais atualizada da instância LaTeX utilizada
%   Também é utilizado o biber para gerenciar as referências bibliográficas
%%%%%%%%%%%%%% 

\documentclass[
    12pt, % Tamanho de fonte definido para 12, se você precisar utilizar um texto em tamanho 10, utilize o comando \footnotesize, que será impresso em tamanho 10
    oneside, % Essa opção vem ativada por padrão, para imprimir em apenas um lado da folha. Comente esta e descomente a opção de baixo se quiser imprimir nos dois lados de uma folha.
    % twoside, % A opção permite gerar o documento utilizando o verso das páginas, porém, ela não indica à impressora que você está utilizando isso ou que ela deva imprimir nos dois lados das folhas (fonte: https://en.wikibooks.org/wiki/LaTeX/Document_Structure)
    openany,
    % openright, % Essa seria uma opção válida, se não afetasse também os capítulos pós-textuais
    a4paper,
    english,
    brazil
]{report}
% Pacotinho básico para adicionar algumas funcionalidades úteis
\usepackage{config/funcoes}

%% Pacotes para formatação de fonte do documento
% Obs.: Usando XeLaTeX, não é necessário usar os pacotes fontenc e inputenc
\usepackage{fontspec}
% Pode ser Times New Roman:
% \setmainfont{Times New Roman} 
% Ou pode ser Arial:
\setmainfont{Arial}
\setsansfont{Arial}
\setmonofont{Andale Mono} % Fonte utilizada no comando \verb, etc. É de uso opcional. Tem suporte no Overleaf

\usepackage{keyval}

% Responsável pela quebra silábica de palavras no final de linha de forma correta para o português
\usepackage[brazil]{babel}
% O pacote babel recomenda o uso do csquotes, para garantir que textos citados estejam escritos corretamente de acordo com as regras do seu idioma. Mesmo assim foi necessário adaptar para o padrão ABNT.
\usepackage[portuguese=brazilian, style=brazilian]{csquotes}
\usepackage{config/citacao} % As configurações para que as citações longas sigam a ABNT

% Pacotes matemáticos (algébrico):
\usepackage{amsmath}
\usepackage{amssymb} % Pacote responsável por adicionar um conjunto de símbolos, principalmente matemáticos. Símbolos, por exemplo, também necessários para o correto referenciamento de leis e decretos 
% Só que também é importante realizar a configuração para adicionar os comandos que imprimem esses símbolos associados aos caracteres que imprimem, assim, você pode adicionar o símbolo diretamente no texto
\usepackage{newunicodechar} % Pacote que permite definir novos caracteres, esses caracteres, depois, podem ser digitados diretamente no arquivo .tex, não necessitando mais chamar o comando do símbolo definido todas as vezes.
\usepackage{config/unicode-char} % Arquivo de configuração com a listagem desses caracteres
\usepackage{unicode-math} % Pacote para deixar as expressões matemáticas com diferentes fontes
\defaultfontfeatures{ Scale=MatchLowercase, Ligatures = TeX }
% Configuração de fonte matemática para utilizar no caso de Times New Roman:
% \setmathfont{Latin Modern Math}
% \setmathfont[range=up/{latin,Latin,num}]{Times New Roman}
% \setmathfont[range=it/{latin,Latin,num}]{Times New Roman Italic}
% \setmathfont[range=bfup/{latin,Latin,num}]{Times New Roman Bold}
% \setmathfont[range=bfit/{latin,Latin,num}]{Times New Roman Bold Italic}

% % Configuração de fonte matemática para utilizar no caso de Arial:
\setmathfont{FiraMath-Regular} % Tem suporte no Overleaf
\setmathfont[range=up/{latin,Latin,greek,Greek,num}]{Arial}
\setmathfont[range=it/{latin,Latin,greek,Greek,num}]{Arial Italic}
\setmathfont[range=bfup/{latin,Latin,greek,Greek,num}]{Arial Bold}
\setmathfont[range=bfit/{latin,Latin,greek,Greek,num}]{Arial Bold Italic}

%% Pacotes para formatação de conteúdo na página
\usepackage[left=3cm,top=3cm,right=2cm,bottom=2cm]{geometry} % Pacote responsável por formatar as dimensões das margens das páginas.
\usepackage{setspace} % Adiciona opções de espaçamento de texto
\usepackage[skip=1.241pt, indent=1.25cm]{parskip} % O recomendado é utilizar esse pacote para gerenciar o parskip e o parindent, ao invés de definir as unidades manualmente no documento, que pode levar a problemas de formatação
\usepackage{ragged2e} % Adiciona opções mais completas para alinhamento de texto
\usepackage{indentfirst} % Faz com que o primeiro parágrafo de cada seção possua indentação também

% Pacote que permite criar estilos para o cabeçalho
\usepackage{fancyhdr}
\usepackage{config/cabecalho} % Cabeçalho customizado para o modelo

%% Adiciono os pacotes para configurar e estilizar o sumário e as seções
\usepackage{titletoc}
\usepackage{titlesec}
\usepackage{alphalph} % Permite lidar com contadores que possuam valor maior que 26 utilizando o alfabeto (o número de letras), ou seja, se passar de 26, vai utilizar AA, AB, AC... Nativamente o LaTeX não realiza esse controle
\usepackage{config/apendice-anexo} % Criação dos comandos para apêndice e anexo

%% Agora customizo as seções e sumário para seguirem as normas do IFFar (itens adicionais do sumário, como apêndice e anexos, também são configurados nesses arquivos)
\usepackage{config/sumario} % Importa o sumário feito para o modelo
%% Adiciona a possibilidade de estilizar os títulos de seções, subseções e afins
\usepackage{config/titulo-sections} % Importa as estilizações feitas das seções e subseções para o modelo

% Pacote para facilitar a customização de listas numeradas, que serão utilizadas para as alíneas e subalíneas
\usepackage{enumitem}
\usepackage{config/enumerate} % Definição das listas de alíneas, subalíneas e índice

\usepackage{rotating} % Adiciona a capacidade de rotacionar elementos (pode ser usado dentro de tabela). SE NÃO FOR UTILIZAR, PODE COMENTAR A LINHA PARA NÃO IMPORTAR
\usepackage{float} % Adiciona configurações adicionais para elementos float (figuras, tabelas, quadros, etc.)
\usepackage{tabularx} % Tabelas no LaTeX são limitadas em algumas características, este pacote resolve algumas dessas falhas
\usepackage{multirow} % Permite criar células com múltiplas linhas nas tabelas
\usepackage{colortbl} % Permite colorir as células de tabelas
\usepackage[table]{xcolor} % Permite adicionar cores no LaTeX. Utilizado para colorir células no quadro do cronograma com cores específicas
\definecolor{cinzaescurinho}{RGB}{38,38,38}
\definecolor{cinzaclarinho}{RGB}{95,95,95}
\definecolor{cinzadestaque}{RGB}{200,200,200}

\usepackage{graphicx} % Adiciona a capacidde de adicionar figuras, além de outras funcionalidade que podem ser utilizadas em quadros e tabelas.
% Figuras podem ser imagens (SVG, por padrão, não funciona), mas documentos PDF também são compatíveis
\graphicspath{ {./img/} } % Adiciona um caminho padrão para arquivo
% Permite modificar a apresentação das legendas (caption) de figuras, quadros e tabelas
\usepackage[labelsep=endash, font=singlespacing, justification=centering, skip=2pt]{caption} % Modifica a separação da numeração da legenda com a descrição dela
\usepackage{newfloat} % Permite criar floats, como o caso dos quadros, de forma prática
\DeclareFloatingEnvironment[listname={Lista de quadros}, name={Quadro}]{quadro} % Crio o elemento float Quadro
% Removo a contabilização de capítulo na numeração das figuras, tabelas e quadros (isso ocorre ao utilizar o documentclass de book ou report)
\counterwithout{figure}{chapter} 
\counterwithout{table}{chapter}
\counterwithout{quadro}{chapter}
\counterwithout{equation}{chapter}
% Obs.: Se você precisar criar outro elemento (e outra lista), como de gráficos ou de qualquer outro tipo, é, teoricamente, bastante simples: 
%   - Você declara o novo ambiente com o \DeclareFloatingEnvironment, junto com o nome do elemento e o título de sua lista
%   - Remove a contabilização do capítulo com o \counterwithout (apesar que acho que isso pode ser realizado no próprio \DeclareFloatingEnvironment)
%   - E depois vai no final do arquivo config/sumario.sty e copia, e cola abaixo, a estilização usada para os elementos de figura ou tabela, realizando a modificação do nome do elemento

%% Pacotes para adicionar o uso de citações e referências no padrão ABNT
% Permite customizar as notas de rodapé. Necessário para a indentação das notas
\usepackage[hang]{footmisc}
\usepackage{config/rodape} % Configurações das notas de rodapé
% Usa o biber por ser uma versão mais parruda do bibtex, adicionalmente, utilizando o pacote biblatex. É importante por resolver uma quantia de erros por conta de caracteres especiais, principalmente na URL das referências

\usepackage{config/epigrafe} % Pacotinho só pra criar o elemento de epigrafe

\usepackage[backend=biber, style=abnt, repeatfields]{biblatex}
\addbibresource{bibliografia.bib} % Você pode adicionar mais de um arquivo.bib, apenas adicione outra linha com o nome do segundo arquivo
\usepackage{config/bibliografia} % Ajustes necessários por causa que o pacote biblatex-abnt não foi atualizado para algumas das mais novas normas da NBR 6023:2018

% Obs.: O pacote imakeidx é um tanto limitado em determinados recursos, então, o usuário está limitado a citar o número da página para os itens dos índices. Além disso, ele não sabe ordenar corretamente quando existem caracteres "especiais", como letras acentuadas, aí tem todo um ajuste para fazer, que pode ser visto nos exemplos dados pelo documento.
% ATENÇÃO: Se você não for utilizar índice, e provavelmente não vai, comente essas linhas abaixo relacionadas ao pacote e o comando \printindex no final do documento. Pelas poucas impressões que pude ter, parece que o tempo de compilação demora bem mais quando se utiliza índice. 
% Outros pacotes podem ter o mesmo efeito, então atente-se, caso você não utilize-os. Não precisa excluir, apenas comentar as linhas, para voltar atrás caso se arrependa (ou dê erro).
\usepackage{imakeidx} % Pacote responsável por permitir criar o índice
\usepackage{config/indice} % Configurações, como a substituição dos termos para as remissivas de acordo com a NBR 6034

%Pacote responsável por permitir colocar url. Ele cria link de atalho no sumário, citações e referência de figuras, tabelas, etc.
\usepackage[hidelinks]{hyperref}
% Adicione aqui os metadados do seu trabalho (os comandos não funcionam aqui):
\include{elementos/DADOS.tex}
\hypersetup{
  unicode=true,
  pdftitle={\tituloTrabalho\separadorTrabalho\subtituloTrabalho},
  pdfsubject={[Insira o assunto/tema de seu trabalho (talvez um resuminho rápido?) Deve ser válido citar que se trata de um TCC, tese ou dissertação, de determinado curso, do IFFar. Esse tipo de coisa]},
  pdfauthor={\autorTrabalho},
  pdfkeywords={[Insira suas palavras chaves]}
}

\usepackage{url}
\urlstyle{same} % Para deixar os links com a mesma fonte do documento.

\usepackage{lipsum} % Pacote meramente cosmético, para testes. Remova ele quando for utilizar o modelo e não tiver mais nenhum chamado para o comando \lipsum, mas só se quiser. Mal esse pacote não deve fazer, mas quanto menos pacotes, menos dor de cabeça e mais rápida compilação.

\begin{document}
\onehalfspacing
\justifying

\pagestyle{empty} % Tô deixando esse comando mais por hábito, ele não é necessário para a lógica utilizada para ocultar a paginação e também ela deixa de ter efeito em elementos que contenham capítulos, como alguns pré-textuais possuem
\pagenumbering{jujuba} % Valor fictício para não realizar a contagem da capa
\include{elementos/capa.tex} % ITEM OBRIGATÓRIO

\pagenumbering{arabic} % Aqui volta-se a ter a contagem de páginas
\begin{SecoesNaoNumeradas}
  \include{elementos/folha-rosto.tex}  % ITEM OBRIGATÓRIO
  \include{elementos/ficha-catalografica.tex}  % ITEM OBRIGATÓRIO
  \include{elementos/folha-aprovacao.tex}  % ITEM OBRIGATÓRIO
  \include{elementos/dedicatoria.tex}
  \include{elementos/agradecimentos.tex}
  \include{elementos/epigrafe.tex}
  \include{elementos/resumo.tex} % ITEM OBRIGATÓRIO
  \include{elementos/abstract.tex} % ITEM OBRIGATÓRIO

  \renewcommand\addvspace[1]{} % Remove o espaço adicional que tem nos títulos das listas de figuras, tabelas e quadros
  % Lista de figuras:
  \listoffigures%  
  % Recomendação do Guia de Normalização de iniciar cada elemento pré-textual e textual no anverso da página:
  \OnesideTwoside{\clearpage}{\cleardoublepage}
  
  % Lista de tabelas:
  \listoftables%  
  \OnesideTwoside{\clearpage}{\cleardoublepage}
  
  % Lista de quadros:
  \listofquadros%  
  \OnesideTwoside{\clearpage}{\cleardoublepage}
  
  % Adicione aqui as outras listas que você criar, como lista de gráficos, fotos, etc.

  \include{elementos/lista-siglas.tex}
  \include{elementos/lista-simbolos.tex}

  %Sumário
  \tableofcontents % ITEM OBRIGATÓRIO  
  \OnesideTwoside{\clearpage}{\cleardoublepage}
\end{SecoesNaoNumeradas}
% \clearpage

% Altero o comando \isPreTextual para sinalizar que agora não é mais a parte pré-textual, então, pode voltar a mostrar a paginação
\renewcommand{\isPreTextual}{0}
\pagestyle{fancyplain}
\begingroup
  \input{capitulos/1-introducao.tex}
  \OnesideTwoside{\clearpage}{\cleardoublepage}
\endgroup

\begingroup
  \input{capitulos/2-configuracao.tex}
  \OnesideTwoside{\clearpage}{\cleardoublepage}
\endgroup

\begingroup
  \input{capitulos/3-elementos-opcionais.tex}
  \OnesideTwoside{\clearpage}{\cleardoublepage}
\endgroup

\begingroup
  \input{capitulos/4-elementos-comuns.tex}
  \OnesideTwoside{\clearpage}{\cleardoublepage}
\endgroup

\begingroup
  \input{capitulos/5-referencias.tex}
  % Por algum motivo, o \clearpage e o \cleardoublepage aqui tá dando uma bugada nesse último capítulo, criando duas páginas em branco. Não tenho ideia do motivo. Faça o seguinte: utilize qualquer um dos dois, desde que a 1 página em branco necessária para as referências iniciar em uma página ímpar (nem sei se é realmente necessário)
  % Talvez nem seja necessário um \clearpage aqui, por causa que o guia fala sobre recomendar iniciar apenas elemento pré-textual e textual no anverso da folha, apesar que eu acho que seria legal iniciar apenas a referência (o primeiro elemento pós-textual). Sei lá, siga seu coração
  % \OnesideTwoside{\clearpage}{\cleardoublepage}
  % \clearpage
\endgroup

%% Aqui são adicionados as referências, apêndices e anexos. É essencial que eles estejam dentro desse ambiente, para formatar corretamente o título da seção deles
\begin{SecoesNaoNumeradas}
%% Aqui é impressa a lista de referências bibliográficas
\begingroup
  \begin{FlushLeft} % As referências devem apresentar alinhamento à esquerda
    \begin{singlespace} % Referências usam espaço simples
      \setlength\bibitemsep{\baselineskip} % Defino que o espaço para separar cada referência é o da altura de uma linha, conforme a ABNT exige
      % heading=bibintoc imprime o nome da seção das referências sem numeração e adiciona no sumário
      % title=Referências modifica o nome da seção, que normalmente seria "Bibliografia", por conta que é o nome utilizado pelos documentclass book e report
      \printbibliography[heading=bibintoc, title=Referências, notkeyword=apud] % ITEM OBRIGATÓRIO
    \end{singlespace}
  \end{FlushLeft}
\endgroup

\include{elementos/glossario.tex}

%% Depois das referências, apresentam-se os apêndices e, depois, os anexos
\begingroup
\apendice{Um exemplo de apêndice}\label{apendice:teste}
\lipsum[6-7]
\endgroup

\begingroup 
\anexo{Um exemplo de anexo}\label{anexo:teste}
\lipsum[6-7]
\endgroup

\printindex % Comente esta linha se não for utilizar índice

\end{SecoesNaoNumeradas}
\end{document}